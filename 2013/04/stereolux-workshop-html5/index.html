
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>GDG Nantes & Stereolux : Workshop HTML5 - Rossi Oddet</title>
  <meta name="author" content="Rossi Oddet">

  
  <meta name="description" content="Le 16/04 dernier, le Stéréolux et le GDG Nantes ont organisé un Workshop HTML5. Une présentation du GDG Nantes &amp; Stereolux L&#8217;événement &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://roddet.github.com/2013/04/stereolux-workshop-html5">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Rossi Oddet" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-32190657-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>	
  <h1><a href="/">Rossi Oddet</a></h1>
  
    <h2>Blog d'un artisan développeur</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:roddet.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/events">Evénements</a></li>
  <li><a href="/viededev">Vie de Développeur</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">GDG Nantes & Stereolux : Workshop HTML5</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-20T19:17:00-04:00" pubdate data-updated="true">Apr 20<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><p>Le 16/04 dernier, le <a href="http://www.stereolux.org/">Stéréolux</a> et le <a href="http://www.gdgnantes.com/">GDG Nantes</a> ont organisé un Workshop HTML5.</p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/2013_04_16_workshop_html5.jpg"></p>

<h2>Une présentation du GDG Nantes &amp; Stereolux</h2>

<p><img class="left" src="http://blog.roddet.com/images/stereolux/html5/presentation_stereolux.jpg"></p>

<p>L&#8217;événement commence par une présentation du GDG Nantes et de Stereolux.</p>

<p>Le GDG Nantes (GDG = Google Developpers Group) est le groupe d&#8217;utilisateurs des technologies Google de Nantes. Il organise régulièrement des conférences, des concours et même des apéros :)</p>

<p>Le Stereolux organise des événements (ateliers, conférence, concert, &#8230;) autour de la création numérique.</p>

<p>Les deux entités collaborent pour la première fois ensemble sur un événement. On sentait l&#8217;attention particulière des leaders de ces entités dans le choix des mots. En effet, si le GDG Nantes a l&#8217;habitude d&#8217;avoir un public de développeur, il avait en face un public mixte (développeur et créateurs numériques). Et l&#8217;inverse pour le Stereolux :)</p>

<h2>HTML5 pour les créatifs</h2>

<p><a href="https://plus.google.com/114772056028520115043/about">Jean-François Garreau</a> nous a ensuite fait une présentation générale d&#8217;HTML5.
Il a enchainé les démonstrations d&#8217;applications web présentant des animations graphiques nous plongeant dans des univers variés (<a href="http://www.chrome.com/maze/">Google Maze</a>, <a href="http://www.chromeexperiments.com/detail/plink-multiplayer-music-experience/">Plink</a>, <a href="http://www.ro.me/">Rome</a>&#8230;).</p>

<p>On retiendra qu&#8217;HTML5 n&#8217;est pas uniquement l&#8217;affaire des développeurs d&#8217;applications de gestion mais aussi celle des créateurs d&#8217;animations diffusées sur le web.</p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/html5_creatif.jpg"></p>

<h2>3 Workshops</h2>

<p>Il fallait faire un choix entre les workshops suivants :</p>

<ul>
<li>Responsive design</li>
<li>3D sur le web (WebGL)</li>
<li>Applications web dynamiques (avec AngularJS)</li>
</ul>


<p>J&#8217;aurai voulu assister à tous les workshops mais un choix devait être fait&#8230;snif&#8230;
Mon choix s&#8217;est porté sur &#8220;AngularJS&#8221;.</p>

<h2>Workshop : Applications web dynamiques avec AngularJS</h2>

<p>Cette session était animée par <a href="https://twitter.com/richard_antoine">Antoine Richard</a>, un passionné de la dynamique côté navigateur. Il avait prévu nous faire développer et c&#8217;est ce qui s&#8217;est passé !</p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-4.png"></p>

<h2>Installation de NodeJS</h2>

<p>Les programmes d&#8217;installation de <a href="http://nodejs.org/">NodeJS</a> ont été distribués pour les plateformes Linux, Mac et Windows. J&#8217;avais déjà NodeJS installé sur ma machine, donc rien à faire pour moi à cette étape.</p>

<p>Vous pouvez récupérer la dernière version de NodeJS : <a href="http://nodejs.org/">http://nodejs.org/</a>.</p>

<h2>Angular en quelques mots</h2>

<ul>
<li>Single Page Application</li>
<li>Etendre HTML</li>
<li>Simple et puissant</li>
<li>Par Google</li>
</ul>


<h2>Récupérer les sources</h2>

<p>Les sources du Workshop ont été publiées sur Github : <a href="https://github.com/antoine-richard/angular-movie-workshop-early2013">https://github.com/antoine-richard/angular-movie-workshop-early2013</a>. Vous pouvez naviguer à travers les branches pour voir les changements entre les différentes étapes.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone https://github.com/antoine-richard/angular-movie-workshop</span></code></pre></td></tr></table></div></figure>


<p>Vous allez récupérer 3 fichiers avec l&#8217;arborescence suivante :
<img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-1.png"></p>

<p>En affichant le fichier index.html dans un navigateur on obtient :</p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-2.png"></p>

<h2>Manipuler le DOM &#8220;sans&#8221; javascript</h2>

<p>Cette partie a pour objectif d&#8217;illustrer la mise en place d&#8217;AngularJS dans une application et une modification du DOM sans écriture de code Javascript</p>

<h3>Inclure le script angular.js</h3>

<figure class='code'><figcaption><span>app/index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;lib/angular.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Déclarer l&#8217;attribut ng-app</h3>

<figure class='code'><figcaption><span>app/index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container&quot;</span> <span class="na">class=</span><span class="s">&quot;intro&quot;</span> <span class="na">ng-app</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>L&#8217;attribut <code>ng-app</code> permet de d&#8217;indiquer l&#8217;emplacement de l&#8217;application AngularJS. Il est possible d&#8217;avoir plusieurs applications dans une même page.</p>

<h3>Déclarer un modèle &#8220;name&#8221; lié au champ de saisie</h3>

<figure class='code'><figcaption><span>app/index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Utilisation du modèle pour afficher les mots saisis</h3>

<figure class='code'><figcaption><span>app/index.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;p&gt;</span>Hello {{name}} !<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>Fichier app/index.html complet</h3>

<figure class='code'><figcaption><span>app/index.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="cp">&lt;!doctype html&gt;</span>
</span><span class='line'><span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">&quot;en&quot;</span><span class="nt">&gt;</span>
</span><span class='line'><span class="nt">&lt;head&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">&quot;utf-8&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;meta</span> <span class="na">http-equiv=</span><span class="s">&quot;X-UA-Compatible&quot;</span> <span class="na">content=</span><span class="s">&quot;IE=edge&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;title&gt;</span>Movies App - AngularJS workshop at Stereolux<span class="nt">&lt;/title&gt;</span>
</span><span class='line'>  <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;css/movies.css&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;lib/angular.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span><span class='line'><span class="nt">&lt;/head&gt;</span>
</span><span class='line'><span class="nt">&lt;body&gt;</span>
</span><span class='line'>  
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container&quot;</span> <span class="na">class=</span><span class="s">&quot;intro&quot;</span> <span class="na">ng-app</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nt">&lt;label&gt;</span>What&#39;s your name ?<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;name&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;p&gt;</span>Hello {{name}} !<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;p</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>AngularJS workshop at Stereolux<span class="nt">&lt;/p&gt;</span>
</span><span class='line'>      
</span><span class='line'><span class="nt">&lt;/body&gt;</span>
</span><span class='line'><span class="nt">&lt;/html&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>Test</h3>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-3.png"></p>

<p>Ce que nous saisissons est automatiquement copié à la suite de &#8220;Hello&#8221;.</p>

<p>Cet exemple simple permet de mettre en évidence la philosophie d&#8217;AngularJS. La manipulation du DOM que nous faisons habituellement en javascript est dans cet exemple effectuée de façon déclarative.</p>

<h2>Maintenant un peu de cinéma !</h2>

<p>Après avoir écrit nos premières lignes d&#8217;AngularJS, nous passons au développement d&#8217;une application permettant de visualiser une liste de films, le détail de chaque film et des informations sur les acteurs principaux.</p>

<p>Ce développement va être fait en plusieurs étapes :</p>

<ul>
<li><a href="#step-0">Step-0 : Utilisation d&#8217;un template</a></li>
<li><a href="#step-1">Step-1 : Externalisation du contrôleur + Appel AJAX</a></li>
<li><a href="#step-2">Step-2 : Filtre et Tri</a></li>
<li><a href="#step-3">Step-3 : Navigation entre différentes vues</a></li>
<li><a href="#step-4">Step-4 : Service AngularJS</a></li>
<li><a href="#step-5">Step-5 : Animation</a></li>
<li><a href="#step-6">Step-6 : Directives</a></li>
<li><a href="#complet">Step-7 : Code complet</a></li>
</ul>


<p><a name="step-0"></a></p>

<h2>Step-0 : Utilisation d&#8217;un template</h2>

<h3>Récupérer les sources</h3>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone https://github.com/antoine-richard/angular-movie-workshop-early2013 -b step-0</span></code></pre></td></tr></table></div></figure>


<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-5.png"></p>

<p>Il y a 2 parties :</p>

<ul>
<li>app : l&#8217;application que nous allons développer</li>
<li>server : un backend qui expose des services REST</li>
</ul>


<h3>Lancer le serveur</h3>

<p>Se positionner à la racine des sources récupérées et lancer la commande :</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>node server/web-server.js</span></code></pre></td></tr></table></div></figure>


<p>L&#8217;application initiale est accessible via l&#8217;adresse : http://localhost:8000/app/index.html</p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-6.png"></p>

<p>A cette étape, les données affichées sont statiques dans la page HTML :</p>

<figure class='code'><figcaption><span>app/index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nt">&lt;h1&gt;</span>Movies<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'>      <span class="nt">&lt;ul&gt;</span>
</span><span class='line'>          <span class="nt">&lt;li&gt;</span>
</span><span class='line'>              <span class="nt">&lt;span&gt;</span>Reservoir Dogs<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Sheet<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>              <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>1992<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>          <span class="nt">&lt;li&gt;</span>
</span><span class='line'>              <span class="nt">&lt;span&gt;</span>Pulp Fiction<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>              <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Sheet<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>              <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>1994<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<p>L&#8217;objectif est maintenant d&#8217;apporter du dynamisme à cette page (injection des données via javascript).</p>

<h3>Suppression des données statiques</h3>

<figure class='code'><figcaption><span>app/index.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;container&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div</span> <span class="na">ng-view</span><span class="nt">&gt;&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Les noeuds <code>&lt;h1&gt;</code> et <code>&lt;ul&gt;</code> sont supprimés.</p>

<p>L&#8217;attribut <code>ng-view</code> déclare l&#8217;emplacement de la vue AngularJS. Nativement, il ne peut y avoir qu&#8217;un seul attribut <code>ng-view</code> par application AngularJS.</p>

<h3>Créer un fragment HTML représentant la liste des films</h3>

<p>Créer un fichier <code>app/partials/movies.html</code> représentant le template des informations supprimées précédemment.</p>

<figure class='code'><figcaption><span>app/partials/movies.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;h1&gt;</span>Movies<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;movie in movies&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{movie.title}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Sheet<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>{{movie.year}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>On remarquera l&#8217;utilisation de <code>ng-repeat</code> qui est une directive fournie par AngularJS pour itérer sur un ensemble d&#8217;objets.
Dans notre cas, la boucle se fera sur la liste des films (variable <code>movies</code>).</p>

<p>{{movie.title}} permet d&#8217;afficher la propriété title de l&#8217;objet <code>movie</code>.</p>

<h3>Modifier le contrôleur</h3>

<figure class='code'><figcaption><span>app/js/app.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">angular</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;moviesApp&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$routeProvider</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;/movies&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">&#39;MoviesCtrl&#39;</span><span class="p">,</span> <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/movies.html&#39;</span> <span class="p">});</span>
</span><span class='line'>  <span class="p">})</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MoviesCtrl&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$scope</span><span class="p">.</span><span class="nx">movies</span> <span class="o">=</span> <span class="p">[</span>
</span><span class='line'>          <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Reservoir Dogs&quot;</span><span class="p">,</span> <span class="nx">year</span><span class="o">:</span> <span class="mi">1992</span> <span class="p">},</span>
</span><span class='line'>          <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Pulp Fiction&quot;</span><span class="p">,</span> <span class="nx">year</span><span class="o">:</span> <span class="mi">1994</span> <span class="p">},</span>
</span><span class='line'>          <span class="p">{</span> <span class="nx">title</span><span class="o">:</span> <span class="s2">&quot;Jackie Brown&quot;</span><span class="p">,</span> <span class="nx">year</span><span class="o">:</span> <span class="mi">1997</span> <span class="p">}</span>
</span><span class='line'>      <span class="p">];</span>
</span><span class='line'>  <span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>$routeProvider permet de faire le lien entre une URL, un contrôleur et un template.</p>

<p>$scope.movies permet d&#8217;ajouter une variable qui porte le nom <code>movies</code> et qui sera visible dans les vues. C&#8217;est sur cette variable qu&#8217;est appliqué la directive <code>ng-repeat</code> à la précédente étape.</p>

<h3>Test</h3>

<p>http://localhost:8000/app/index.html#/movies</p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-7.png"></p>

<p><a name="step-1"></a></p>

<h2>Step-1 : Externalisation du contrôleur + Appel AJAX</h2>

<p>L&#8217;objectif de cette étape est de mettre à jour la vue non plus via un tableau javascript &#8220;en dur&#8221; mais avec un appel serveur asynchrone. Nous allons profiter pour externaliser les contrôleurs de l&#8217;application.</p>

<h3>Inclusion du nouveau fichier à créer</h3>

<figure class='code'><figcaption><span>app/index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/controllers.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Suppression du contrôleur dans le fichier app/js/app.js</h3>

<figure class='code'><figcaption><span>app/js/app.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;moviesApp&#39;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$routeProvider</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$routeProvider</span><span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;/movies&#39;</span><span class="p">,</span> <span class="p">{</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">&#39;MoviesCtrl&#39;</span><span class="p">,</span> <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/movies.html&#39;</span> <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Création du fichier app/js/controllers.js</h3>

<figure class='code'><figcaption><span>app/js/controllers.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MoviesCtrl&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$http&#39;</span><span class="p">,</span> <span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/server/data/movies.json/$&#39;</span><span class="p">).</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">movies</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$scope</span><span class="p">.</span><span class="nx">movies</span> <span class="o">=</span> <span class="nx">movies</span><span class="p">;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>$http fourni par AngularJS permet de faire un appel HTTP asynchrone.</p>

<p>A noter qu&#8217;il est possible d&#8217;utiliser $resource pour effectuer des appels REST. Son utilisation doit être préférée à $http lorsque le serveur à interroger est RESTful. $http est un service de plus bas niveau que $resource.</p>

<h3>Test</h3>

<p>http://localhost:8000/app/index.html#/movies</p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-9.png"></p>

<p><a name="step-2"></a></p>

<h2>Step-2 : Filtre et Tri</h2>

<p>Dans cette étape, l&#8217;écran principal va être enrichi pour permettre un filtre de données par titre et un tri suivant plusieurs critères.</p>

<h3>Ajout d&#8217;un filtre et un tri</h3>

<figure class='code'><figcaption><span>app/partials/movies.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;h1&gt;</span>Movies<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;filter-box&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label&gt;</span>Filter<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;query.title&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label&gt;</span>Sort by<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;select</span> <span class="na">ng-model=</span><span class="s">&quot;order&quot;</span> <span class="na">ng-init=</span><span class="s">&quot;order=&#39;year&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>Year<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>          <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;movie in movies | filter:query | orderBy:order&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{movie.title}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#&quot;</span><span class="nt">&gt;</span>Sheet<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>{{movie.year}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p><strong>ng-model=&#8221;query.title&#8221;</strong> permet de faire une correspondance entre la saisie de la partie filter et la valeur de la propriété <code>title</code> du filtre.</p>

<p><strong>movie in movies | filter:query</strong> le symbole <code>|</code> permet de définir une fonction à appliquer sur un ensemble de données, ici <code>movies</code>. Le mot clé <code>filter</code> permet de filtrer des données suivant un ensemble de critères. Ici l&#8217;objet <code>query</code> est un conteneur qui contient l&#8217;ensemble de clé/valeur représentant le filtre à appliquer. Dans notre exemple, il contient <code>title=XXX</code> où <code>XXX</code> est la valeur saisie.</p>

<p>La combinaison des deux éléments précédents permet ainsi d&#8217;appliquer un filtre sur les films affichés en fonction du texte saisi.</p>

<p><strong>ng-model=&#8221;order&#8221;</strong> déclare un modèle qui porte le nom <code>order</code> et qui contient la valeur sélectionnée dans la liste déroulante.</p>

<p><strong>ng-init=&#8221;order=&#8217;year&#8217;&#8221;</strong> déclare la valeur initiale (à l&#8217;affichage de la vue) du modèle <code>order</code>. Cela permet d&#8217;appliquer un tri par défaut.</p>

<p><strong>| orderBy:order</strong> applique un tri suivant une propriété (valeur du modèle <code>order</code>).</p>

<h3>Test</h3>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-8.png"></p>

<h3>Préparation de l&#8217;étape suivante</h3>

<p>Ajoutons ensuite les 2 fichiers suivants pour préparer l&#8217;étape &#8220;Step-3&#8221;.</p>

<ul>
<li><code>app/partials/actors.html</code> : template d&#8217;affichage des acteurs d&#8217;un film</li>
</ul>


<figure class='code'><figcaption><span>app/partials/actors.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;h2&gt;</span>
</span><span class='line'>  Pulp Fiction
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h2&gt;</span>
</span><span class='line'><span class="nt">&lt;h3&gt;</span>
</span><span class='line'>  Actors
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/44&quot;</span><span class="nt">&gt;</span>Movie<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>Bruce Willis<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;role&quot;</span><span class="nt">&gt;</span>Butch Coolidge<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>Samuel L. Jackson<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;role&quot;</span><span class="nt">&gt;</span>Jules Winnfield<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>John Travolta<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;role&quot;</span><span class="nt">&gt;</span>Vincent Vega<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><code>app/partials/movie.html</code> : template d&#8217;affichage du détail d&#8217;un film.</li>
</ul>


<figure class='code'><figcaption><span>app/partials/movie.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;h2&gt;</span>
</span><span class='line'>  Pulp Fiction
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h2&gt;</span>
</span><span class='line'><span class="nt">&lt;h3&gt;</span>
</span><span class='line'>  Info sheet
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/44/actors&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Year<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>1994<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Duration<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>154 minutes<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Budget<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>$8.5 million<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;img</span> <span class="na">src=</span><span class="s">&quot;/server/data/posters/pulp_fiction.jpg&quot;</span><span class="nt">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p><a name="step-3"></a></p>

<h2>Step-3 : Navigation entre différentes vues</h2>

<p>Cette étape va permettre la mise en place de plusieurs vues accessibles via des URL spécifiques :</p>

<ul>
<li><code>/movies</code> : la vue développée jusqu&#8217;ici</li>
<li><code>/movies/:movieId</code> (exemple /movies/4) : affichage du détail d&#8217;un film, le template à utiliser est <code>app/partials/movie.html</code></li>
<li><code>/movies/:movieId/actors</code> (exemple /movies/4/actors) : affichage des acteurs principaux d&#8217;un film, le template à utiliser est <code>app/partials/actors.html</code></li>
</ul>


<h3>Configuration de la navigation</h3>

<figure class='code'><figcaption><span>app/js/app.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;moviesApp&#39;</span><span class="p">,</span> <span class="p">[]);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">config</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$routeProvider</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$routeProvider</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;/movies&#39;</span><span class="p">,</span>                   <span class="p">{</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">&#39;MoviesCtrl&#39;</span><span class="p">,</span>            <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/movies.html&#39;</span> <span class="p">})</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;/movies/:movieId&#39;</span><span class="p">,</span>          <span class="p">{</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">&#39;MovieDetailCtrl&#39;</span><span class="p">,</span>           <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/movie.html&#39;</span>  <span class="p">})</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">when</span><span class="p">(</span><span class="s1">&#39;/movies/:movieId/actors&#39;</span><span class="p">,</span>   <span class="p">{</span> <span class="nx">controller</span><span class="o">:</span> <span class="s1">&#39;MovieActorsCtrl&#39;</span><span class="p">,</span>           <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">&#39;partials/actors.html&#39;</span> <span class="p">})</span>
</span><span class='line'>      <span class="p">.</span><span class="nx">otherwise</span><span class="p">(</span>                       <span class="p">{</span> <span class="nx">redirectTo</span><span class="o">:</span> <span class="s1">&#39;/movies&#39;</span> <span class="p">});</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Mise à jour des contrôleurs</h3>

<figure class='code'><figcaption><span>app/js/app.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MoviesCtrl&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$http&#39;</span><span class="p">,</span> <span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/server/data/movies.json/$&#39;</span><span class="p">)</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">movies</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$scope</span><span class="p">.</span><span class="nx">movies</span> <span class="o">=</span> <span class="nx">movies</span><span class="p">;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}]);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MovieDetailCtrl&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$http&#39;</span><span class="p">,</span> <span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="s1">&#39;$routeParams&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nx">$routeParams</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/server/data/movies.json/&#39;</span><span class="o">+</span><span class="nx">$routeParams</span><span class="p">.</span><span class="nx">movieId</span><span class="o">+</span><span class="s1">&#39;/$&#39;</span><span class="p">)</span> <span class="c1">// Lightweight movie object</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">lightweightMovie</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$scope</span><span class="p">.</span><span class="nx">movie</span> <span class="o">=</span> <span class="nx">lightweightMovie</span><span class="p">;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}]);</span>
</span><span class='line'>
</span><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MovieActorsCtrl&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$http&#39;</span><span class="p">,</span> <span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="s1">&#39;$routeParams&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nx">$routeParams</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/server/data/movies.json/&#39;</span><span class="o">+</span><span class="nx">$routeParams</span><span class="p">.</span><span class="nx">movieId</span><span class="p">)</span> <span class="c1">// Heavyweight movie object</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">fullMovie</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$scope</span><span class="p">.</span><span class="nx">movie</span> <span class="o">=</span> <span class="nx">fullMovie</span><span class="p">;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'><span class="p">}]);</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Le template d&#8217;affichage des acteurs d&#8217;un film</h3>

<figure class='code'><figcaption><span>app/partials/actors.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">&quot;light&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  {{movie.title}}
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h2&gt;</span>
</span><span class='line'><span class="nt">&lt;h3&gt;</span>
</span><span class='line'>  Actors
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/{{movie.id}}&quot;</span><span class="nt">&gt;</span>Movie<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;actor in movie.actors&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{actor.name}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;role&quot;</span><span class="nt">&gt;</span>{{actor.role}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>Le template d&#8217;affichage du détail d&#8217;un film</h3>

<figure class='code'><figcaption><span>app/partials/movie.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;h2&gt;</span>
</span><span class='line'>  {{movie.title}}
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h2&gt;</span>
</span><span class='line'><span class="nt">&lt;h3&gt;</span>
</span><span class='line'>  Info sheet
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/{{movie.id}}/actors&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Year<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{movie.year}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Duration<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{movie.duration}} minutes<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Budget<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>${{movie.budget}} million<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;img</span> <span class="na">ng-src=</span><span class="s">&quot;{{movie.poster}}&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>Mise à jour du template d&#8217;affichage de tous les films</h3>

<figure class='code'><figcaption><span>app/partials/movies.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;h1&gt;</span>Movies<span class="nt">&lt;/h1&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;filter-box&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label&gt;</span>Filter<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;text&quot;</span> <span class="na">ng-model=</span><span class="s">&quot;query.title&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'>  <span class="nt">&lt;div&gt;</span>
</span><span class='line'>      <span class="nt">&lt;label&gt;</span>Sort by<span class="nt">&lt;/label&gt;</span>
</span><span class='line'>      <span class="nt">&lt;select</span> <span class="na">ng-model=</span><span class="s">&quot;order&quot;</span> <span class="na">ng-init=</span><span class="s">&quot;order=&#39;year&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>          <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>Year<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>          <span class="nt">&lt;option</span> <span class="na">value=</span><span class="s">&quot;title&quot;</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/option&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/select&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/div&gt;</span>
</span><span class='line'><span class="nt">&lt;/div&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;movie in movies | filter:query | orderBy:order&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{movie.title}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/{{movie.id}}/actors&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/{{movie.id}}&quot;</span><span class="nt">&gt;</span>Sheet<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>{{movie.year}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>Test</h3>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-10.png"></p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-11.png"></p>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-12.png"></p>

<p><a name="step-4"></a></p>

<h2>Step-4 : Mise en place d&#8217;un service AngularJS</h2>

<p>AngularJS permet la mise en place de services réutilisables que les contrôleurs peuvent appeler. Cela permet d&#8217;avoir des contrôleurs ne contenant pas de logique complexe.</p>

<p>Nous allons maintenant mettre en place dans l&#8217;application une gestion de films favoris.</p>

<h3>Inclusion d&#8217;un nouveau fichier javascript pour nos services</h3>

<figure class='code'><figcaption><span>app/index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/services.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Service de gestion de favoris</h3>

<figure class='code'><figcaption><span>app/js/services.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">factory</span><span class="p">(</span><span class="s1">&#39;starService&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">var</span> <span class="nx">starred</span> <span class="o">=</span> <span class="p">[];</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">toggleStar</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">starred</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="o">=</span> <span class="o">!</span><span class="nx">starred</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">isStarred</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">return</span> <span class="nx">starred</span><span class="p">[</span><span class="nx">id</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>La méthode <code>factory</code> permet de déclarer un service réutilisable avec un nom (ici <code>starService</code>). Ce service est un singleton.</p>

<p>Il expose deux fonctions :</p>

<ul>
<li><code>toggleStar(id)</code> pour ajouter en favori</li>
<li><code>isStarred(id)</code> qui détermine si un film est favori</li>
</ul>


<h3>Utilisation du service depuis le contrôleur</h3>

<figure class='code'><figcaption><span>app/js/controllers.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">app</span><span class="p">.</span><span class="nx">controller</span><span class="p">(</span><span class="s1">&#39;MovieDetailCtrl&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;$http&#39;</span><span class="p">,</span> <span class="s1">&#39;$scope&#39;</span><span class="p">,</span> <span class="s1">&#39;$routeParams&#39;</span><span class="p">,</span> <span class="s1">&#39;starService&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$http</span><span class="p">,</span> <span class="nx">$scope</span><span class="p">,</span> <span class="nx">$routeParams</span><span class="p">,</span> <span class="nx">starService</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>  <span class="nx">$http</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">&#39;/server/data/movies.json/&#39;</span><span class="o">+</span><span class="nx">$routeParams</span><span class="p">.</span><span class="nx">movieId</span><span class="o">+</span><span class="s1">&#39;/$&#39;</span><span class="p">)</span> <span class="c1">// Lightweight movie object</span>
</span><span class='line'>  <span class="p">.</span><span class="nx">success</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">lightweightMovie</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">$scope</span><span class="p">.</span><span class="nx">movie</span> <span class="o">=</span> <span class="nx">lightweightMovie</span><span class="p">;</span>
</span><span class='line'>      <span class="nx">$scope</span><span class="p">.</span><span class="nx">favorite</span> <span class="o">=</span> <span class="nx">starService</span><span class="p">.</span><span class="nx">isStarred</span><span class="p">(</span><span class="nx">lightweightMovie</span><span class="p">.</span><span class="nx">id</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;filled&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">});</span>
</span><span class='line'>  <span class="nx">$scope</span><span class="p">.</span><span class="nx">toggleStar</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">starService</span><span class="p">.</span><span class="nx">toggleStar</span><span class="p">(</span><span class="nx">id</span><span class="p">);</span>
</span><span class='line'>      <span class="nx">$scope</span><span class="p">.</span><span class="nx">favorite</span> <span class="o">=</span> <span class="nx">starService</span><span class="p">.</span><span class="nx">isStarred</span><span class="p">(</span><span class="nx">id</span><span class="p">)</span> <span class="o">?</span> <span class="s2">&quot;filled&quot;</span> <span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'><span class="p">}]);</span>
</span></code></pre></td></tr></table></div></figure>


<p>Lors du retour de l&#8217;appel serveur, le service créé est utilisé pour savoir si le film récupéré a été mis en favori. Si le film est favori la variable <code>favorite</code> prend la valeur <code>filled</code> sinon elle vaudra &#8220;&#8221;.</p>

<p>La fonction <code>toggleStar</code> mise dans l&#8217;objet <strong>$scope</strong> lui permettra d&#8217;être utilisée par les templates.</p>

<h3>Mise à jour du template d&#8217;affichage du détail d&#8217;un film</h3>

<figure class='code'><figcaption><span>app/partials/movie.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'><span class="nt">&lt;h2&gt;</span>
</span><span class='line'>  {{movie.title}}
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h2&gt;</span>
</span><span class='line'><span class="nt">&lt;h3&gt;</span>
</span><span class='line'>  Info sheet
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/{{movie.id}}/actors&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Year<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{movie.year}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Duration<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{movie.duration}} minutes<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Budget<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>${{movie.budget}} million<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;info&quot;</span><span class="nt">&gt;</span>Favorite<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;star {{favorite}}&quot;</span> <span class="na">ng-click=</span><span class="s">&quot;toggleStar(movie.id)&quot;</span><span class="nt">&gt;&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;img</span> <span class="na">ng-src=</span><span class="s">&quot;{{movie.poster}}&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>Deux choses à noter :</p>

<ul>
<li>{{favorite}}  va prendre la valeur <code>filled</code> ou <code>""</code> suivant la logique définie dans le contrôleur</li>
<li><code>ng-click</code> permet de définir une action à exécuter lors du clic sur la zone favori. L&#8217;action consiste à appeler la fonction <code>toggleStar</code> définie précédemment avec l&#8217;identifiant du film.</li>
</ul>


<h3>Test</h3>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-13.png"></p>

<p><a name="step-5"></a></p>

<h2>Step-5 : Animation</h2>

<p>AngularJS intègre la possibilité d&#8217;appliquer des animations CSS. Cette fonctionnalité n&#8217;est accessible actuellement qu&#8217;en béta (version 1.1.4).</p>

<h3>Récupérer la version béta d&#8217;AngularJS et remplacer le fichier app/lib/angular.js</h3>

<p><a href="https://github.com/antoine-richard/angular-movie-workshop-early2013/raw/step-6/app/lib/angular.js">AngularJS v1.1.4 béta</a></p>

<h3>Ajouter le fichier <code>app/css/animation.css</code></h3>

<figure class='code'><figcaption><span>app/css/animation.css</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
</pre></td><td class='code'><pre><code class='css'><span class='line'><span class="nc">.custom-enter-setup</span><span class="o">,</span> <span class="nc">.custom-leave-setup</span><span class="o">,</span> <span class="nc">.custom-move-setup</span> <span class="p">{</span>
</span><span class='line'>  <span class="o">-</span><span class="n">webkit</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="m">.5s</span> <span class="n">linear</span> <span class="n">all</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">moz</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="m">.5s</span> <span class="n">linear</span> <span class="n">all</span><span class="p">;</span>
</span><span class='line'>  <span class="o">-</span><span class="n">o</span><span class="o">-</span><span class="n">transition</span><span class="o">:</span> <span class="m">.5s</span> <span class="n">linear</span> <span class="n">all</span><span class="p">;</span>
</span><span class='line'>  <span class="n">transition</span><span class="o">:</span> <span class="m">.5s</span> <span class="n">linear</span> <span class="n">all</span><span class="p">;</span>
</span><span class='line'>  <span class="k">position</span><span class="o">:</span> <span class="k">relative</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.custom-enter-setup</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">-10px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">opacity</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.custom-enter-setup.custom-enter-start</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">opacity</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.custom-leave-setup</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'>  <span class="k">opacity</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.custom-leave-setup.custom-leave-start</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">left</span><span class="o">:</span> <span class="m">-10px</span><span class="p">;</span>
</span><span class='line'>  <span class="k">opacity</span><span class="o">:</span> <span class="m">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="nc">.custom-move-setup</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">opacity</span><span class="o">:</span> <span class="m">0</span><span class="o">.</span><span class="m">5</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nc">.custom-move-setup.custom-move-start</span> <span class="p">{</span>
</span><span class='line'>  <span class="k">opacity</span><span class="o">:</span> <span class="m">1</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Inclure le nouveau fichier CSS</h3>

<figure class='code'><figcaption><span>app/index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>...
</span><span class='line'><span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;css/animation.css&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>...
</span></code></pre></td></tr></table></div></figure>


<h3>Appliquer une animation à la liste des films</h3>

<figure class='code'><figcaption><span>app/partials/movies.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'>
</span><span class='line'>...
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;movie in movies | filter:query | orderBy:order&quot;</span> <span class="na">ng-animate=</span><span class="s">&quot;&#39;custom&#39;&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span&gt;</span>{{movie.title}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/{{movie.id}}/actors&quot;</span><span class="nt">&gt;</span>Actors<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/{{movie.id}}&quot;</span><span class="nt">&gt;</span>Sheet<span class="nt">&lt;/a&gt;</span>
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;year&quot;</span><span class="nt">&gt;</span>{{movie.year}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>...
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<ul>
<li><p>On remarquera l&#8217;utilisation de la directive <code>ng-animate</code> pour appliquer une animation à un élément du DOM.</p></li>
<li><p><code>custom</code> représente le préfixe des noms des classes CSS qu&#8217;AngularJS va appliquer.</p></li>
<li><p>Les suffixes <code>enter-setup</code>, <code>leave-setup</code>, &#8230; que l&#8217;on voit dans le fichier <code>app/css/animation.css</code> sont des mots clés qu&#8217;AngularJS va utiliser pour appliquer les styles successifs dans l&#8217;ordre.</p></li>
</ul>


<h3>Test</h3>

<p>En rechargeant la page principale, on obtient une animation (changement d&#8217;opacité et translation de la gauche vers la droite).</p>

<p><a name="step-6"></a></p>

<h2>Step-6 : Directives</h2>

<p>Nous avons jusqu&#8217;ici utiliser des directives fournies par AngularJS. Il est temps d&#8217;en créer une pour notre application.</p>

<h3>Création d&#8217;un fichier source de directives</h3>

<figure class='code'><figcaption><span>app/js/directives.js </span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;moviesApp.directives&#39;</span><span class="p">,</span> <span class="p">[])</span>
</span><span class='line'><span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">&#39;mvActor&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="p">{</span>
</span><span class='line'>      <span class="nx">restrict</span><span class="o">:</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">replace</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">scope</span><span class="o">:</span> <span class="p">{</span>
</span><span class='line'>          <span class="nx">name</span><span class="o">:</span> <span class="s1">&#39;=&#39;</span>
</span><span class='line'>      <span class="p">},</span>
</span><span class='line'>      <span class="nx">template</span><span class="o">:</span> <span class="s1">&#39;&lt;span&gt;&lt;/span&gt;&#39;</span><span class="p">,</span>
</span><span class='line'>      <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">element</span><span class="p">,</span> <span class="nx">attributes</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">(</span><span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">===</span> <span class="s1">&#39;Samuel L. Jackson&#39;</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>              <span class="nx">scope</span><span class="p">.</span><span class="nx">name</span> <span class="o">+=</span> <span class="s1">&#39; !&#39;</span><span class="p">;</span>
</span><span class='line'>              <span class="nx">element</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s1">&#39;samuel&#39;</span><span class="p">);</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">};</span>
</span><span class='line'><span class="p">});</span>
</span></code></pre></td></tr></table></div></figure>


<p>Un nouveau module dont le nom est <code>moviesApp.directives</code> est créé. Il ne définit que la directive :</p>

<ul>
<li>porte le nom <code>mvActor</code></li>
<li>est de type <code>Element</code> (restrict : E). Une directive peut être de type :

<ul>
<li> <code>E</code> : Element <code>&lt;mv-actor&gt;&lt;/mv-actor&gt;</code></li>
<li> <code>A</code> : Attribut  <code>&lt;div mv-actor="samuel" /&gt;</code></li>
<li> <code>C</code> : Class  <code>&lt;div class="mv-actor:exp;" /&gt;</code></li>
<li> <code>M</code> : Comment <code>&lt;!-- directive mv-actor exp --&gt;</code></li>
</ul>
</li>
<li>va remplacer l&#8217;élément du DOM sur lequel il est appliqué (<code>replace:true</code>)</li>
<li>est paramétrable via une propriété <code>name</code></li>
<li>va se baser sur le template défini pour l&#8217;attribut <code>template</code> pour générer l&#8217;affichage</li>
<li>va exécuter la fonction définie pour la propriété <code>link</code> après la phase de &#8220;compilation&#8221; de la directive et avant de créer l&#8217;affichage de la vue. C&#8217;est via cette propriété que l&#8217;on peut injecter du dynamisme à une directive.</li>
</ul>


<p>Cette directive applique un traitement particulier à &#8220;Samuel L. Jackson&#8221; :</p>

<ul>
<li>Ajout du <code>!</code> à la suite de son nom</li>
<li>Application de la classe <code>samuel</code> qui permet d&#8217;afficher sa photo</li>
</ul>


<h3>Inclure le nouveau fichier de script <code>app/js/directives.js</code></h3>

<figure class='code'><figcaption><span>app/index.html</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="nt">&lt;script </span><span class="na">src=</span><span class="s">&quot;js/directives.js&quot;</span><span class="nt">&gt;&lt;/script&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Déclaration du module directives comme dépendance de l&#8217;application</h3>

<figure class='code'><figcaption><span>app/js/app.js</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="kd">var</span> <span class="nx">app</span> <span class="o">=</span> <span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">&#39;moviesApp&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;moviesApp.directives&#39;</span><span class="p">]);</span>
</span><span class='line'><span class="p">...</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Utilisation de la directive</h3>

<figure class='code'><figcaption><span>app/partials/actors.html </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='html'><span class='line'><span class="c">&lt;!--[if lte IE 8]&gt;</span>
</span><span class='line'><span class="c">    &lt;script&gt;</span>
</span><span class='line'><span class="c">        document.createElement(&#39;mv-actor&#39;);</span>
</span><span class='line'><span class="c">    &lt;/script&gt;</span>
</span><span class='line'><span class="c">&lt;![endif]--&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;h2</span> <span class="na">class=</span><span class="s">&quot;light&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  {{movie.title}}
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies&quot;</span><span class="nt">&gt;</span>Home<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h2&gt;</span>
</span><span class='line'><span class="nt">&lt;h3&gt;</span>
</span><span class='line'>  Actors
</span><span class='line'>  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">&quot;#/movies/{{movie.id}}&quot;</span><span class="nt">&gt;</span>Movie<span class="nt">&lt;/a&gt;</span>
</span><span class='line'><span class="nt">&lt;/h3&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;ul&gt;</span>
</span><span class='line'>  <span class="nt">&lt;li</span> <span class="na">ng-repeat=</span><span class="s">&quot;actor in movie.actors&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;mv</span><span class="na">-actor</span> <span class="na">name=</span><span class="s">&quot;actor.name&quot;</span><span class="nt">&gt;</span><span class="err">&lt;</span>/mv-actor&gt;
</span><span class='line'>      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;role&quot;</span><span class="nt">&gt;</span>{{actor.role}}<span class="nt">&lt;/span&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/li&gt;</span>
</span><span class='line'><span class="nt">&lt;/ul&gt;</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<h3>Test</h3>

<p><img class="center" src="http://blog.roddet.com/images/stereolux/html5/angular-14.png"></p>

<p>Voilà Samuel L. Jackson, un acteur au-dessus des autres, bien mis en valeur :)</p>

<p><a name="complet"></a></p>

<h2>Le code complet</h2>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>git clone https://github.com/antoine-richard/angular-movie-workshop-early2013 -b step-7</span></code></pre></td></tr></table></div></figure>


<p>ou via l&#8217;interface web de Github <a href="https://github.com/antoine-richard/angular-movie-workshop-early2013/tree/step-7">https://github.com/antoine-richard/angular-movie-workshop-early2013/tree/step-7</a></p>

<h2>Le mot de la fin d&#8217;<a href="https://twitter.com/richard_antoine">Antoine Richard</a></h2>

<blockquote class="twitter-tweet"><p>@<a href="https://twitter.com/rossioddet">rossioddet</a> merci :) préserve toi de manipuler le DOM hors des directives et ta maintenabilité sera bien gardée !</p>&mdash; Antoine RICHARD (@richard_antoine) <a href="https://twitter.com/richard_antoine/status/324261610392801280">April 16, 2013</a></blockquote>


<script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>


<h2>Liens utiles</h2>

<ul>
<li><a href="https://plus.google.com/events/c05p73b1ufl9n1d5uvgaepf3dhg">Photos de l&#8217;événement</a></li>
<li><a href="https://github.com/antoine-richard/angular-movie-workshop-early2013">Les sources Workshop AngularJS</a></li>
<li><a href="https://github.com/jbodet/winteriscoming">Les sources Workshop CSS 3</a></li>
<li><a href="http://animateyourhtml5.appspot.com/">Les ressources Workshop WebGL</a></li>
</ul>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Rossi Oddet</span></span>

      








  


<time datetime="2013-04-20T19:17:00-04:00" pubdate data-updated="true">Apr 20<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/angularjs/'>angularjs</a>, <a class='category' href='/blog/categories/gdgnantes/'>gdgnantes</a>, <a class='category' href='/blog/categories/html5/'>html5</a>, <a class='category' href='/blog/categories/stereolux/'>stereolux</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://roddet.github.com/2013/04/stereolux-workshop-html5/" data-via="rossioddet" data-counturl="http://roddet.github.com/2013/04/stereolux-workshop-html5/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/2013/04/devoxxfr13-conference-javaee7-en-detail/" title="Previous Post: Devoxx France 2013 # Conférence # Java EE 7 plus en détail">&laquo; Devoxx France 2013 # Conférence # Java EE 7 plus en détail</a>
      
      
        <a class="basic-alignment right" href="/2013/06/gatling2-har-support/" title="Next Post: Gatling 2 : Support du format HAR">Gatling 2 : Support du format HAR &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Rossi Oddet</h1>
  <br/>
  <table>
  	<tr><td width="30%"><img src="/images/photo.jpeg" width="75"/></td>
  		<td>&nbsp;&nbsp;</td>
    <td width="70%"> <p>Développeur, Blogger et passionné par les communautés IT.</p></td></tr>
</table>
</section>
<a class="twitter-timeline" href="https://twitter.com/rossioddet" data-widget-id="314511007521312768">Tweets by @rossioddet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - Rossi Oddet -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'blogroddet';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://roddet.github.com/2013/04/stereolux-workshop-html5/';
        var disqus_url = 'http://roddet.github.com/2013/04/stereolux-workshop-html5/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
